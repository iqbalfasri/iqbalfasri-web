@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base styles - Contrasting Vibrancy Theme */
@layer base {
    html {
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        font-size: 100%;
    }

    /* Light Mode (when .light class is applied) */
    body {
        @apply bg-dark text-light transition-colors duration-300;
        font-family: "Plus Jakarta Sans", system-ui, sans-serif;
        font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
        line-height: 1.6;
        letter-spacing: -0.01em;
    }

    /* Dark Mode (default) */
    .dark body {
        @apply bg-dark text-light;
    }

    /* Light Mode */
    .light body {
        @apply bg-light text-dark;
    }

    /* Fluid Typography Scale */
    h1 {
        font-size: clamp(1.875rem, 1.5rem + 1.5vw, 2.5rem);
        line-height: 1.2;
        letter-spacing: -0.025em;
        font-weight: 600;
    }

    h2 {
        font-size: clamp(1.5rem, 1.25rem + 1vw, 2rem);
        line-height: 1.25;
        letter-spacing: -0.02em;
        font-weight: 600;
    }

    h3 {
        font-size: clamp(1.25rem, 1.1rem + 0.5vw, 1.5rem);
        line-height: 1.3;
        letter-spacing: -0.015em;
        font-weight: 600;
    }

    p {
        font-size: clamp(0.9375rem, 0.9rem + 0.2vw, 1.0625rem);
        line-height: 1.7;
    }

    /* Monospace text */
    code, .font-mono {
        font-family: "Geist Mono", ui-monospace, monospace;
        font-size: 0.875em;
        letter-spacing: -0.02em;
    }

    /* Selection colors - Dark mode (yellow) */
    .dark ::selection {
        @apply bg-accent-yellow text-dark;
    }
    .dark ::-moz-selection {
        @apply bg-accent-yellow text-dark;
    }

    /* Selection colors - Light mode (blue) */
    .light ::selection {
        @apply bg-accent-blue text-light;
    }
    .light ::-moz-selection {
        @apply bg-accent-blue text-light;
    }

    /* Better text rendering for high DPI displays */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        body {
            -webkit-font-smoothing: subpixel-antialiased;
        }
    }

    /* Larger screens (4K, etc.) */
    @media (min-width: 1920px) {
        html {
            font-size: 112.5%;
        }
    }

    @media (min-width: 2560px) {
        html {
            font-size: 125%;
        }
    }
}

/* Theme-aware utilities */
@layer utilities {
    /* Text colors */
    .text-primary {
        @apply text-dark;
    }
    .dark .text-primary {
        @apply text-light;
    }

    .text-secondary {
        @apply text-dark/70;
    }
    .dark .text-secondary {
        @apply text-light/70;
    }

    .text-muted {
        @apply text-dark/50;
    }
    .dark .text-muted {
        @apply text-light/50;
    }

    .text-subtle {
        @apply text-dark/40;
    }
    .dark .text-subtle {
        @apply text-light/40;
    }

    /* Accent colors - blue (light) / yellow (dark) */
    .text-accent {
        @apply text-accent-blue;
    }
    .dark .text-accent {
        @apply text-accent-yellow;
    }

    .hover-accent:hover {
        @apply text-accent-blue;
    }
    .dark .hover-accent:hover {
        @apply text-accent-yellow;
    }

    /* Background */
    .bg-base {
        @apply bg-light;
    }
    .dark .bg-base {
        @apply bg-dark;
    }

    .bg-surface {
        @apply bg-dark/5;
    }
    .dark .bg-surface {
        @apply bg-light/5;
    }
}

/* Theme-aware components */
@layer components {
    /* Link styles - blue (light) / yellow (dark) */
    .link-accent {
        @apply text-accent-blue underline underline-offset-4 decoration-accent-blue/30 hover:decoration-accent-blue transition-all duration-200;
    }
    .dark .link-accent {
        @apply text-accent-yellow decoration-accent-yellow/30 hover:decoration-accent-yellow;
    }

    /* Theme toggle button */
    .theme-toggle {
        @apply relative w-14 h-7 rounded-full cursor-pointer bg-dark/10 transition-colors duration-300;
    }
    .dark .theme-toggle {
        @apply bg-light/10;
    }

    .theme-toggle-knob {
        @apply absolute top-1 left-1 w-5 h-5 rounded-full bg-accent-blue transition-all duration-300;
    }
    .dark .theme-toggle-knob {
        @apply left-8 bg-accent-yellow;
    }

    /* Blog Prose Styling */
    .prose-blog {
        @apply space-y-4;
    }

    .prose-blog h1 {
        @apply text-primary mt-8 mb-4;
    }

    .prose-blog h2 {
        @apply text-primary mt-6 mb-3;
    }

    .prose-blog h3 {
        @apply text-primary mt-5 mb-2;
    }

    .prose-blog p {
        @apply text-secondary leading-relaxed;
    }

    .prose-blog a {
        @apply link-accent;
    }

    .prose-blog ul,
    .prose-blog ol {
        @apply text-secondary space-y-2 pl-6;
    }

    .prose-blog li {
        @apply leading-relaxed;
    }

    .prose-blog code {
        @apply font-mono text-sm bg-surface px-2 py-1 rounded;
    }

    .prose-blog pre {
        @apply bg-surface p-4 rounded overflow-x-auto;
    }

    .prose-blog pre code {
        @apply bg-transparent p-0;
    }

    .prose-blog blockquote {
        @apply border-l-4 border-accent-blue pl-4 italic text-secondary;
    }

    .dark .prose-blog blockquote {
        @apply border-accent-yellow;
    }

    .prose-blog img {
        @apply rounded my-6;
    }

    /* Animations */
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fade-in 0.5s ease-out;
    }
}
